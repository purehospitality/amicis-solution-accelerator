# =============================================================================
# NODE AUTH SERVICE - ENVIRONMENT VARIABLES
# =============================================================================
# This file contains all environment variables for the Node.js Auth Service.
# Copy this to .env and update with your actual values.
# =============================================================================

# Application
NODE_ENV=development
PORT=3000
LOG_LEVEL=info

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=1h

# MongoDB / Cosmos DB
COSMOS_ENDPOINT=mongodb://localhost:27017
COSMOS_DATABASE=amicis
# For Azure Cosmos DB:
# COSMOS_ENDPOINT=mongodb://your-cosmos-account.mongo.cosmos.azure.com:10255/?ssl=true&replicaSet=globaldb

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
# For Azure Cache for Redis:
# REDIS_HOST=your-redis.redis.cache.windows.net
# REDIS_PORT=6380
# REDIS_PASSWORD=your-redis-key

# Azure Key Vault (Optional but Recommended for Production)
KEY_VAULT_ENABLED=false
KEY_VAULT_URL=https://kv-amicis-ikea-dev.vault.azure.net/
# When enabled, secrets like JWT_SECRET, REDIS_PASSWORD will be fetched from Key Vault
# Secret names in Key Vault should use hyphens: JWT-SECRET, REDIS-PASSWORD, etc.

# Application Insights (Optional but Recommended for Production)
APPLICATIONINSIGHTS_ENABLED=false
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=xxxx;IngestionEndpoint=https://...
# Get connection string from Azure Portal > Application Insights > Properties

# =============================================================================
# PRODUCTION CONFIGURATION NOTES
# =============================================================================
#
# 1. JWT_SECRET: Use a strong, randomly generated secret (min 256 bits)
#    Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. Key Vault: Recommended for production to centralize secret management
#    - Enable Managed Identity on your Azure service (AKS, App Service, etc.)
#    - Grant the managed identity "Get" permission on secrets in Key Vault
#    - Set KEY_VAULT_ENABLED=true and KEY_VAULT_URL
#
# 3. Application Insights: Essential for production monitoring
#    - Create Application Insights resource in Azure
#    - Copy connection string from Azure Portal
#    - Set APPLICATIONINSIGHTS_ENABLED=true
#
# 4. Redis: Use Azure Cache for Redis in production
#    - Enable SSL/TLS (port 6380)
#    - Use access keys from Azure Portal
#    - Configure firewall rules to allow your services
#
# 5. Cosmos DB: Use connection string with authentication
#    - Enable firewall to restrict access
#    - Use strong password or managed identity
#    - Consider using private endpoints
#
# =============================================================================
